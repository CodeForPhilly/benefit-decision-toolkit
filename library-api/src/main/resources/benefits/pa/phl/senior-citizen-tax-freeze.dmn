<?xml version="1.0" encoding="UTF-8"?>
<dmn:definitions xmlns:dmn="http://www.omg.org/spec/DMN/20180521/MODEL/" xmlns="https://kie.apache.org/dmn/_BD421073-0881-40E8-8F8F-ABE5A9839C46" xmlns:feel="http://www.omg.org/spec/DMN/20180521/FEEL/" xmlns:kie="http://www.drools.org/kie/dmn/1.2" xmlns:dmndi="http://www.omg.org/spec/DMN/20180521/DMNDI/" xmlns:di="http://www.omg.org/spec/DMN/20180521/DI/" xmlns:dc="http://www.omg.org/spec/DMN/20180521/DC/" xmlns:included1="https://kie.apache.org/dmn/_1B91A885-130A-4E0B-A762-E12AA6DD5C79" xmlns:included3="https://kie.apache.org/dmn/_3B9E68B5-63FA-437C-AF93-CC12DDD00BC5" xmlns:included2="https://kie.apache.org/dmn/_9514D95A-63FB-4345-911B-D83E1867F709" xmlns:included4="https://kie.apache.org/dmn/_C189BB80-C23E-476E-B0BB-DDF4FF7D305A" id="_5E484E2E-5F46-4440-99B8-185D7903D687" name="PhlSeniorCitizenTaxFreeze" typeLanguage="http://www.omg.org/spec/DMN/20180521/FEEL/" namespace="https://kie.apache.org/dmn/_BD421073-0881-40E8-8F8F-ABE5A9839C46">
  <dmn:extensionElements/>
  <dmn:import id="_D478B6A6-92B5-466C-BAEE-8362FD567430" name="BDT" namespace="https://kie.apache.org/dmn/_1B91A885-130A-4E0B-A762-E12AA6DD5C79" locationURI="../../../BDT.dmn" importType="http://www.omg.org/spec/DMN/20180521/MODEL/"/>
  <dmn:import id="_A1A2B4FC-7E83-44E6-B4CD-01CE05DC8A33" name="PersonNotEnrolledInBenefit" namespace="https://kie.apache.org/dmn/_3B9E68B5-63FA-437C-AF93-CC12DDD00BC5" locationURI="../../../checks/enrollment/person-not-enrolled-in-benefit.dmn" importType="http://www.omg.org/spec/DMN/20180521/MODEL/"/>
  <dmn:import id="_5603CAA8-1E07-4D7C-8E0E-244A40364A12" name="Benefits" namespace="https://kie.apache.org/dmn/_9514D95A-63FB-4345-911B-D83E1867F709" locationURI="../../Benefits.dmn" importType="http://www.omg.org/spec/DMN/20180521/MODEL/"/>
  <dmn:import id="_47E35A98-1C7D-4CDC-8372-D11DF8908D4B" name="PersonMinAge" namespace="https://kie.apache.org/dmn/_C189BB80-C23E-476E-B0BB-DDF4FF7D305A" locationURI="../../../checks/age/person-min-age.dmn" importType="http://www.omg.org/spec/DMN/20180521/MODEL/"/>
  <dmn:decisionService id="_62C59400-F886-4E36-88EE-993952958729" name="PhlSeniorCitizenTaxFreezeService">
    <dmn:extensionElements/>
    <dmn:variable id="_B6540DC2-9F2F-4240-B2AE-C06C6097537C" name="PhlSeniorCitizenTaxFreezeService" typeRef="Benefits.tBenefitResponse"/>
    <dmn:outputDecision href="#_48837847-A17B-46D3-B836-CBC03A496DD2"/>
    <dmn:outputDecision href="#_4A938843-44E5-49D1-9487-A6DE4374FF36"/>
    <dmn:inputData href="#_CEA5EA1A-F1CB-4C2C-BFFE-8C38CCE3EF0C"/>
  </dmn:decisionService>
  <dmn:decision id="_48837847-A17B-46D3-B836-CBC03A496DD2" name="checks">
    <dmn:extensionElements/>
    <dmn:variable id="_4924E641-27D4-4EC4-AEAE-F16132E5C26F" name="checks" typeRef="context"/>
    <dmn:informationRequirement id="_E2221D69-1E5F-4A85-87DB-70D2AA94E074">
      <dmn:requiredInput href="#_CEA5EA1A-F1CB-4C2C-BFFE-8C38CCE3EF0C"/>
    </dmn:informationRequirement>
    <dmn:knowledgeRequirement id="_FB8052C8-344C-4EAF-A683-FB416FDCC516">
      <dmn:requiredKnowledge href="https://kie.apache.org/dmn/_3B9E68B5-63FA-437C-AF93-CC12DDD00BC5#_513F29D9-6F29-4B8A-AD8D-F5C339B354DE"/>
    </dmn:knowledgeRequirement>
    <dmn:knowledgeRequirement id="_6D384429-261E-4D46-96E6-99C38F5F39C7">
      <dmn:requiredKnowledge href="https://kie.apache.org/dmn/_C189BB80-C23E-476E-B0BB-DDF4FF7D305A#_6E428234-5215-4D38-AB4E-9083E80882D4"/>
    </dmn:knowledgeRequirement>
    <dmn:knowledgeRequirement id="_D066EC0D-9C7D-44BC-9705-E0FAEC1CA922">
      <dmn:requiredKnowledge href="https://kie.apache.org/dmn/_1B91A885-130A-4E0B-A762-E12AA6DD5C79#_14EAB512-0E33-419C-9630-BA0265476B6E"/>
    </dmn:knowledgeRequirement>
    <dmn:context id="_2C41DC24-2BC2-4A5A-ACA1-46B5591343A9">
      <dmn:contextEntry>
        <dmn:variable id="_0022269F-1767-4788-9DA9-AE14DAA0547C" name="NotAlreadyOnSeniorCitizenTaxFreeze" typeRef="boolean"/>
        <dmn:invocation id="_E72BFFF9-1F22-48F4-B1A2-5AD2936D8304">
          <dmn:literalExpression id="_F2EDC358-2908-4206-864E-1FEB4565450E">
            <dmn:text>PersonNotEnrolledInBenefit.PersonNotEnrolledInBenefitService</dmn:text>
          </dmn:literalExpression>
          <dmn:binding>
            <dmn:parameter id="_76A2CCD4-9736-4DF0-A253-FD101F8DD9C9" name="situation" typeRef="BDT.tSituation"/>
            <dmn:literalExpression id="_7195608D-DE1B-4130-A20F-2DEDFC8978FF">
              <dmn:text>situation</dmn:text>
            </dmn:literalExpression>
          </dmn:binding>
          <dmn:binding>
            <dmn:parameter id="_8FB1B8E0-8E72-4D65-88AD-D5F28B9611AF" name="parameters" typeRef="PersonNotEnrolledInBenefit.tParameters"/>
            <dmn:context id="_7FABC583-BADF-4E7C-B996-AA67FD8AF0E0">
              <dmn:contextEntry>
                <dmn:variable id="_12DC79E4-BB41-4471-B526-9608931FC6D7" name="personId" typeRef="string"/>
                <dmn:literalExpression id="_48CCDC10-E351-4232-8CEE-E30C3D4129BF">
                  <dmn:text>situation.primaryPersonId</dmn:text>
                </dmn:literalExpression>
              </dmn:contextEntry>
              <dmn:contextEntry>
                <dmn:variable id="_4A0B535A-CBDF-4CC4-88E8-7B0F6E50AE20" name="benefit" typeRef="string"/>
                <dmn:literalExpression id="_70A7D709-DE57-47E3-83A3-57F1EAE0BD5F">
                  <dmn:text>"PhlSeniorCitizenTaxFreeze"</dmn:text>
                </dmn:literalExpression>
              </dmn:contextEntry>
            </dmn:context>
          </dmn:binding>
        </dmn:invocation>
      </dmn:contextEntry>
      <dmn:contextEntry>
        <dmn:variable id="_573A5D16-A29A-41D4-A7C1-11958C96459E" name="PhillyHomeownerOccupant" typeRef="boolean"/>
        <dmn:literalExpression id="_77A744E6-FE46-4BC5-87EF-F48E370224FF">
          <dmn:text>situation.simpleChecks.phillyHomeownerOccupant</dmn:text>
        </dmn:literalExpression>
      </dmn:contextEntry>
      <dmn:contextEntry>
        <dmn:variable id="_40A14410-42A2-4698-88BF-1C50D5570450" name="PrimarySpouse65PlusThisYear" typeRef="boolean"/>
        <dmn:invocation id="_BCE26E11-D61A-435A-A4DA-85E5B6D89200">
          <dmn:literalExpression id="_94E78000-8974-41B6-86D8-ACB0409B4E59">
            <dmn:text>PersonMinAge.PersonMinAgeService</dmn:text>
          </dmn:literalExpression>
          <dmn:binding>
            <dmn:parameter id="_5BCD442A-BF32-4656-B355-82079E060D82" name="situation" typeRef="BDT.tSituation"/>
            <dmn:literalExpression id="_496C83BE-7D6A-438B-9412-6C994C3CFAAD">
              <dmn:text>situation</dmn:text>
            </dmn:literalExpression>
          </dmn:binding>
          <dmn:binding>
            <dmn:parameter id="_98AC55CA-1E60-46A0-BC0C-ECE633849ECF" name="parameters" typeRef="PersonMinAge.tParameters"/>
            <dmn:context id="_FA726D01-C947-4F13-868D-BDEBC9F7BCC2">
              <dmn:contextEntry>
                <dmn:variable id="_2BA3408B-4A66-4F0B-87B2-A26EC6271B2D" name="personId" typeRef="string"/>
                <dmn:literalExpression id="_ECB52040-3923-491C-8F13-996B6076A02A">
                  <dmn:text>BDT.spouse id(situation.relationships, situation.primaryPersonId)</dmn:text>
                </dmn:literalExpression>
              </dmn:contextEntry>
              <dmn:contextEntry>
                <dmn:variable id="_7BB0BD60-DD26-45F3-87E6-0F0C435CD5C5" name="minAge" typeRef="number"/>
                <dmn:literalExpression id="_FC227DF3-FC54-48E2-8F29-8CE87AF00FCC">
                  <dmn:text>65</dmn:text>
                </dmn:literalExpression>
              </dmn:contextEntry>
              <dmn:contextEntry>
                <dmn:variable id="_E564E461-5958-4482-B9B3-157DA41B40F9" name="asOfDate" typeRef="date"/>
                <dmn:literalExpression id="_BF78DABC-8D58-4955-83B3-128391438990">
                  <dmn:text>date(today().year, 12, 31)</dmn:text>
                </dmn:literalExpression>
              </dmn:contextEntry>
            </dmn:context>
          </dmn:binding>
        </dmn:invocation>
      </dmn:contextEntry>
    </dmn:context>
  </dmn:decision>
  <dmn:decision id="_4A938843-44E5-49D1-9487-A6DE4374FF36" name="isEligible">
    <dmn:extensionElements/>
    <dmn:variable id="_83FC62F6-527E-4FA5-AF83-3EC8A7ABC31A" name="isEligible" typeRef="boolean"/>
    <dmn:informationRequirement id="_AF13419F-6264-4A6B-B9C2-D00CFF543498">
      <dmn:requiredDecision href="#_48837847-A17B-46D3-B836-CBC03A496DD2"/>
    </dmn:informationRequirement>
    <dmn:context id="_9EC26C9B-6D9C-4E1E-B8C9-4DF780647BB8">
      <dmn:contextEntry>
        <dmn:variable id="_BDC8E0CB-CE88-4FF6-A7FD-C50BE381B330" name="checksAsList" typeRef="BDT.tBooleanList"/>
        <dmn:literalExpression id="_753DBF44-638A-45E4-A7B3-9FF5312A0430">
          <dmn:text>// e.g. [true, false, true, null, ...]
for check in (get entries(checks))
return
  check.value</dmn:text>
        </dmn:literalExpression>
      </dmn:contextEntry>
      <dmn:contextEntry>
        <dmn:variable id="_8ED4004A-57D5-4897-8FEC-818BF9F6BA04" name="result" typeRef="boolean"/>
        <dmn:literalExpression id="_E0CCDA22-68E7-4444-8329-4BDDCF976EC4">
          <dmn:text>// true if all checks are true
// null if there are any null checks
// false if any check is false
all(checksAsList)</dmn:text>
        </dmn:literalExpression>
      </dmn:contextEntry>
      <dmn:contextEntry>
        <dmn:literalExpression id="_457E1D22-40B6-4549-8234-33CA886FA341">
          <dmn:text>result</dmn:text>
        </dmn:literalExpression>
      </dmn:contextEntry>
    </dmn:context>
  </dmn:decision>
  <dmn:inputData id="_CEA5EA1A-F1CB-4C2C-BFFE-8C38CCE3EF0C" name="situation">
    <dmn:extensionElements/>
    <dmn:variable id="_8D3D6737-C50F-4BCD-8296-7DCE7B266878" name="situation" typeRef="BDT.tSituation"/>
  </dmn:inputData>
  <dmndi:DMNDI>
    <dmndi:DMNDiagram id="_135D0325-3976-4323-94BB-BD5139D32AAB" name="DRG">
      <di:extension>
        <kie:ComponentsWidthsExtension>
          <kie:ComponentWidths dmnElementRef="_2C41DC24-2BC2-4A5A-ACA1-46B5591343A9">
            <kie:width>50</kie:width>
            <kie:width>327</kie:width>
            <kie:width>480</kie:width>
          </kie:ComponentWidths>
          <kie:ComponentWidths dmnElementRef="_E72BFFF9-1F22-48F4-B1A2-5AD2936D8304">
            <kie:width>50</kie:width>
            <kie:width>120</kie:width>
            <kie:width>290</kie:width>
          </kie:ComponentWidths>
          <kie:ComponentWidths dmnElementRef="_F2EDC358-2908-4206-864E-1FEB4565450E"/>
          <kie:ComponentWidths dmnElementRef="_7195608D-DE1B-4130-A20F-2DEDFC8978FF">
            <kie:width>290</kie:width>
          </kie:ComponentWidths>
          <kie:ComponentWidths dmnElementRef="_7FABC583-BADF-4E7C-B996-AA67FD8AF0E0">
            <kie:width>50</kie:width>
            <kie:width>120</kie:width>
            <kie:width>100</kie:width>
          </kie:ComponentWidths>
          <kie:ComponentWidths dmnElementRef="_48CCDC10-E351-4232-8CEE-E30C3D4129BF">
            <kie:width>100</kie:width>
          </kie:ComponentWidths>
          <kie:ComponentWidths dmnElementRef="_70A7D709-DE57-47E3-83A3-57F1EAE0BD5F">
            <kie:width>100</kie:width>
          </kie:ComponentWidths>
          <kie:ComponentWidths dmnElementRef="_77A744E6-FE46-4BC5-87EF-F48E370224FF">
            <kie:width>480</kie:width>
          </kie:ComponentWidths>
          <kie:ComponentWidths dmnElementRef="_BCE26E11-D61A-435A-A4DA-85E5B6D89200">
            <kie:width>50</kie:width>
            <kie:width>120</kie:width>
            <kie:width>290</kie:width>
          </kie:ComponentWidths>
          <kie:ComponentWidths dmnElementRef="_94E78000-8974-41B6-86D8-ACB0409B4E59"/>
          <kie:ComponentWidths dmnElementRef="_496C83BE-7D6A-438B-9412-6C994C3CFAAD">
            <kie:width>290</kie:width>
          </kie:ComponentWidths>
          <kie:ComponentWidths dmnElementRef="_FA726D01-C947-4F13-868D-BDEBC9F7BCC2">
            <kie:width>50</kie:width>
            <kie:width>120</kie:width>
            <kie:width>100</kie:width>
          </kie:ComponentWidths>
          <kie:ComponentWidths dmnElementRef="_ECB52040-3923-491C-8F13-996B6076A02A">
            <kie:width>100</kie:width>
          </kie:ComponentWidths>
          <kie:ComponentWidths dmnElementRef="_FC227DF3-FC54-48E2-8F29-8CE87AF00FCC">
            <kie:width>100</kie:width>
          </kie:ComponentWidths>
          <kie:ComponentWidths dmnElementRef="_BF78DABC-8D58-4955-83B3-128391438990">
            <kie:width>100</kie:width>
          </kie:ComponentWidths>
          <kie:ComponentWidths dmnElementRef="_9EC26C9B-6D9C-4E1E-B8C9-4DF780647BB8">
            <kie:width>50</kie:width>
            <kie:width>120</kie:width>
            <kie:width>500</kie:width>
          </kie:ComponentWidths>
          <kie:ComponentWidths dmnElementRef="_753DBF44-638A-45E4-A7B3-9FF5312A0430">
            <kie:width>500</kie:width>
          </kie:ComponentWidths>
          <kie:ComponentWidths dmnElementRef="_E0CCDA22-68E7-4444-8329-4BDDCF976EC4">
            <kie:width>500</kie:width>
          </kie:ComponentWidths>
          <kie:ComponentWidths dmnElementRef="_457E1D22-40B6-4549-8234-33CA886FA341">
            <kie:width>500</kie:width>
          </kie:ComponentWidths>
        </kie:ComponentsWidthsExtension>
      </di:extension>
      <dmndi:DMNShape id="dmnshape-drg-_62C59400-F886-4E36-88EE-993952958729" dmnElementRef="_62C59400-F886-4E36-88EE-993952958729" isCollapsed="false">
        <dmndi:DMNStyle>
          <dmndi:FillColor red="255" green="255" blue="255"/>
          <dmndi:StrokeColor red="0" green="0" blue="0"/>
          <dmndi:FontColor red="0" green="0" blue="0"/>
        </dmndi:DMNStyle>
        <dc:Bounds x="374" y="167" width="334" height="207"/>
        <dmndi:DMNLabel/>
        <dmndi:DMNDecisionServiceDividerLine>
          <di:waypoint x="374" y="267"/>
          <di:waypoint x="708" y="267"/>
        </dmndi:DMNDecisionServiceDividerLine>
      </dmndi:DMNShape>
      <dmndi:DMNShape id="dmnshape-drg-_513F29D9-6F29-4B8A-AD8D-F5C339B354DE" dmnElementRef="included3:_513F29D9-6F29-4B8A-AD8D-F5C339B354DE" isCollapsed="false">
        <dmndi:DMNStyle>
          <dmndi:FillColor red="255" green="255" blue="255"/>
          <dmndi:StrokeColor red="0" green="0" blue="0"/>
          <dmndi:FontColor red="0" green="0" blue="0"/>
        </dmndi:DMNStyle>
        <dc:Bounds x="56" y="15" width="493" height="100"/>
        <dmndi:DMNLabel/>
        <dmndi:DMNDecisionServiceDividerLine>
          <di:waypoint x="56" y="65"/>
          <di:waypoint x="549" y="65"/>
        </dmndi:DMNDecisionServiceDividerLine>
      </dmndi:DMNShape>
      <dmndi:DMNShape id="dmnshape-drg-_6E428234-5215-4D38-AB4E-9083E80882D4" dmnElementRef="included4:_6E428234-5215-4D38-AB4E-9083E80882D4" isCollapsed="false">
        <dmndi:DMNStyle>
          <dmndi:FillColor red="255" green="255" blue="255"/>
          <dmndi:StrokeColor red="0" green="0" blue="0"/>
          <dmndi:FontColor red="0" green="0" blue="0"/>
        </dmndi:DMNStyle>
        <dc:Bounds x="23" y="323" width="277" height="100"/>
        <dmndi:DMNLabel/>
        <dmndi:DMNDecisionServiceDividerLine>
          <di:waypoint x="23" y="373"/>
          <di:waypoint x="300" y="373"/>
        </dmndi:DMNDecisionServiceDividerLine>
      </dmndi:DMNShape>
      <dmndi:DMNShape id="dmnshape-drg-_48837847-A17B-46D3-B836-CBC03A496DD2" dmnElementRef="_48837847-A17B-46D3-B836-CBC03A496DD2" isCollapsed="false">
        <dmndi:DMNStyle>
          <dmndi:FillColor red="255" green="255" blue="255"/>
          <dmndi:StrokeColor red="0" green="0" blue="0"/>
          <dmndi:FontColor red="0" green="0" blue="0"/>
        </dmndi:DMNStyle>
        <dc:Bounds x="419" y="207" width="100" height="50"/>
        <dmndi:DMNLabel/>
      </dmndi:DMNShape>
      <dmndi:DMNShape id="dmnshape-drg-_4A938843-44E5-49D1-9487-A6DE4374FF36" dmnElementRef="_4A938843-44E5-49D1-9487-A6DE4374FF36" isCollapsed="false">
        <dmndi:DMNStyle>
          <dmndi:FillColor red="255" green="255" blue="255"/>
          <dmndi:StrokeColor red="0" green="0" blue="0"/>
          <dmndi:FontColor red="0" green="0" blue="0"/>
        </dmndi:DMNStyle>
        <dc:Bounds x="566" y="207" width="100" height="50"/>
        <dmndi:DMNLabel/>
      </dmndi:DMNShape>
      <dmndi:DMNShape id="dmnshape-drg-_CEA5EA1A-F1CB-4C2C-BFFE-8C38CCE3EF0C" dmnElementRef="_CEA5EA1A-F1CB-4C2C-BFFE-8C38CCE3EF0C" isCollapsed="false">
        <dmndi:DMNStyle>
          <dmndi:FillColor red="255" green="255" blue="255"/>
          <dmndi:StrokeColor red="0" green="0" blue="0"/>
          <dmndi:FontColor red="0" green="0" blue="0"/>
        </dmndi:DMNStyle>
        <dc:Bounds x="418" y="400" width="100" height="50"/>
        <dmndi:DMNLabel/>
      </dmndi:DMNShape>
      <dmndi:DMNShape id="dmnshape-drg-_14EAB512-0E33-419C-9630-BA0265476B6E" dmnElementRef="included1:_14EAB512-0E33-419C-9630-BA0265476B6E" isCollapsed="false">
        <dmndi:DMNStyle>
          <dmndi:FillColor red="255" green="255" blue="255"/>
          <dmndi:StrokeColor red="0" green="0" blue="0"/>
          <dmndi:FontColor red="0" green="0" blue="0"/>
        </dmndi:DMNStyle>
        <dc:Bounds x="111.00000000000001" y="193.3421052631579" width="100" height="50"/>
        <dmndi:DMNLabel/>
      </dmndi:DMNShape>
      <dmndi:DMNEdge id="dmnedge-drg-_E2221D69-1E5F-4A85-87DB-70D2AA94E074-AUTO-TARGET" dmnElementRef="_E2221D69-1E5F-4A85-87DB-70D2AA94E074">
        <di:waypoint x="468" y="425"/>
        <di:waypoint x="469" y="257"/>
      </dmndi:DMNEdge>
      <dmndi:DMNEdge id="dmnedge-drg-_FB8052C8-344C-4EAF-A683-FB416FDCC516" dmnElementRef="_FB8052C8-344C-4EAF-A683-FB416FDCC516">
        <di:waypoint x="302.5" y="65"/>
        <di:waypoint x="419" y="232"/>
      </dmndi:DMNEdge>
      <dmndi:DMNEdge id="dmnedge-drg-_6D384429-261E-4D46-96E6-99C38F5F39C7" dmnElementRef="_6D384429-261E-4D46-96E6-99C38F5F39C7">
        <di:waypoint x="161.5" y="373"/>
        <di:waypoint x="419" y="232"/>
      </dmndi:DMNEdge>
      <dmndi:DMNEdge id="dmnedge-drg-_D066EC0D-9C7D-44BC-9705-E0FAEC1CA922" dmnElementRef="_D066EC0D-9C7D-44BC-9705-E0FAEC1CA922">
        <di:waypoint x="161" y="218.3421052631579"/>
        <di:waypoint x="419" y="232"/>
      </dmndi:DMNEdge>
      <dmndi:DMNEdge id="dmnedge-drg-_AF13419F-6264-4A6B-B9C2-D00CFF543498" dmnElementRef="_AF13419F-6264-4A6B-B9C2-D00CFF543498">
        <di:waypoint x="469" y="232"/>
        <di:waypoint x="566" y="232"/>
      </dmndi:DMNEdge>
    </dmndi:DMNDiagram>
  </dmndi:DMNDI>
</dmn:definitions>